function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(){function e(){var e={timer:900,modal:!0,fiatCurrency:"EUR",fiatSign:"€",enableFiatTotal:!0,enablePoweredBy:!1,enableBack:!0,redirectTimeout:5,minOverpaymentFiat:1,maxUnderpaymentFiat:.01,statusInterval:10,showExactAmount:!0,showCoinsScreen:!1};this.options=e,this.arguments&&(this.options=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(e,this.arguments));var n=this,r=n.options;if(this.resizeListener=function(){b(n.state.currencies[n.state.selected].address)},n.root=document.getElementById("bcprovider"),n.root.removeAttribute("style"),n.state.html=n.root.innerHTML,r.settingsUrl){r.modal&&q.call(n);var a=new XMLHttpRequest;f.call(n),a.onload=function(){if(200!==a.status)_.call(n);else{h.call(n);var e=JSON.parse(a.responseText);Object.assign(r,e),t.call(n),$(document).trigger("currenciesLoaded")}},a.open("GET",r.settingsUrl,!0),a.setRequestHeader("Content-Type","application/json"),a.send()}else t.call(n)}function t(){var e=this;e.coinsBlock=document.querySelector(".BCPROVIDER__Icons"),e.paymentBlock=document.querySelector(".P-Payment"),e.paymentHeader=document.querySelector(".P-Payment__header"),e.paymentHeaderTimer=document.querySelector(".P-Payment__header__timer"),e.paymentHeaderTitle=document.querySelector(".P-Payment__header__title"),e.paymentHeaderHelper=document.querySelector(".P-Payment__header__helper"),e.paymentHeaderCheckout=document.querySelector(".P-Payment__header__helper__checkout"),e.paymentHeaderGiftCard=document.querySelector(".P-Payment__header__helper__giftcard"),e.closeButton=document.querySelector(".P-Payment__bcprovider__close"),e.backButton=document.querySelector(".P-Payment__bcprovider__back"),e.closeModal=function(t){t.preventDefault(),w.call(e)},e.backButtonFn=function(t){t.preventDefault(),r.call(e)},e.closeButton.addEventListener("click",e.closeModal),e.backButton.addEventListener("click",e.backButtonFn);var t=e.state,a=e.options;if(e.defaultTimer=a.timer,document.querySelector(".bcprovider-app").removeAttribute("style"),a.modal&&!a.settingsUrl&&q.call(e),a.enablePoweredBy&&document.querySelector(".BCPROVIDER__brand-link").removeAttribute("style"),"string"==typeof a.currencies)n.call(e);else{if(!Array.isArray(a.currencies)||!a.currencies.length)throw _.call(e),new Error("Currencies is undefined");t.currencies=a.currencies,t.currencies.length>1||a.showCoinsScreen?r.call(e):t.currencies[t.selected].currencyUrl?T.call(e):o.call(e)}}function n(){var e=this,t=e.options,n=e.state;f.call(e);var a=new XMLHttpRequest;a.onload=function(){if(200!==a.status)_.call(e);else try{var i=JSON.parse(a.responseText);if(Array.isArray(i)||"[object Object]"===Object.prototype.toString.call(i)){h();var c=i;if("[object Object]"===Object.prototype.toString.call(i))if(i.title)c=[i];else{for(var l in c=[],i)i.hasOwnProperty(l)&&(s=l,!isNaN(parseFloat(s))&&isFinite(s)?c[l]=i[l]:c.push(i[l]))}n.currencies=c,c.length>1||t.showCoinsScreen?r.call(e):o.call(e)}else _.call(e)}catch(t){_.call(e)}var s},a.open("GET",t.currencies,!0),a.setRequestHeader("Content-Type","application/json"),a.onerror=function(){_.call(e)},a.send()}function r(){var e=this;a.call(e),k.call(e),e.handleDocumentVisibility&&document.removeEventListener("visibilitychange",e.handleDocumentVisibility);var t=e.coinsBlock;t.innerHTML='<h1 class="bcprovider__title">'.concat(t.getAttribute("data-text-title"),"</h1>");var n=t.getAttribute("data-text-disable");e.state.currencies.map((function(r,a){var i=["col-xs-12"],c="button-"+r.title,l=document.createElement("div");l.setAttribute("role","button"),l.setAttribute("tabindex",0),l.setAttribute("id",c),["btc","eth"].includes(r.code.toLowerCase())&&i.push("disabled"),l.className=i.join(" "),l.onclick=function(t){if(t.preventDefault(),["btc","eth"].includes(r.code.toLowerCase()))return!1;if("function"==typeof e.options.onclick&&!e.options.onclick(r,l))return;if(r.currencyUrl){var n=new XMLHttpRequest;P.call(e),n.onload=function(){if(200!==n.status)S.call(e);else try{g.call(e);var t=JSON.parse(n.responseText);Object.assign(e.state.currencies[a],t),$(".bcprovider-app").data("min-value",{minimum:t.minimum,token:t.token}),e.state.selected=a,o.call(e),$(document).trigger("btcForGiftCardLoaded")}catch(t){$(document).trigger("btcForGiftCardError"),S.call(e)}},n.open("GET",r.currencyUrl,!0),n.setRequestHeader("Content-Type","application/json"),n.onerror=function(){S.call(e)},n.send()}else e.state.selected=a,o.call(e)};var s="bitcoin gold"===r.title.toLowerCase()?"Bitcoin-gold":r.title,d="";e.options.showExactAmount&&(d='<p class="crypto-provider__exchange">\n                                    <span class="crypto-provider__exchange__value">'.concat(r.coinsValue?r.coinsValue:""," ").concat(r.code,'</span>\n                                    <span  class="crypto-provider__exchange__currency">= ').concat(e.options.fiatSign).concat(e.options.fiatValue.toFixed(2),"</span>\n                                </p>")),l.innerHTML='<div class="crypto-provider crypto-provider--'.concat(s,'">\n                    <i class="icon-crypto icon-crypto--').concat(s,'"></i>\n                    <div class="crypto-provider__info">\n                        <h1 class="crypto-provider__name">\n                            <span>').concat(r.title,"</span>\n                            ").concat(["btc","eth"].includes(r.code.toLowerCase())?' <span class="label label-danger"><i class="icon-warning"></i>'.concat(n,"</span>"):"","\n                        </h1>\n                        ").concat(d,"\n                    </div>\n                </div>"),t.appendChild(l)})),e.backButton.style.display="none",e.closeButton.removeAttribute("style")}function a(){var e=this;A.call(e);var t=e.state,n=e.options;t.paymentsHtml?document.querySelector(".P-box__inner").innerHTML=t.paymentsHtml:t.paymentsHtml=document.querySelector(".P-box__inner").innerHTML,e.paymentBlock.style.display="none",e.coinsBlock.removeAttribute("style"),clearInterval(t.interval),clearInterval(t.checkStatusInterval),n.timer=e.defaultTimer,t.isConfirming=!1,e.paymentHeaderTitle.textContent=e.paymentHeaderTitle.getAttribute("data-text-waiting"),e.paymentHeaderHelper.removeAttribute("style")}function o(e){var t=this,n=t.state,r=t.options;if(t.closeButton.style.display="none",!t.state.currencies[t.state.selected].address)throw S.call(t),new Error("Currency address is undefined");k.call(t);var a=document.createElement("div");a.innerHTML=n.html;var o=a.querySelector(".P-Payment__start").cloneNode(!0),l=document.querySelector(".P-Payment__start");l.parentNode.replaceChild(o,l),t.coinsBlock.style.display="none",t.paymentBlock.removeAttribute("style");var f=n.currencies[n.selected],_=+f.rate,h=f.code;t.paymentHeader.classList.remove("P-Payment__header--red"),t.paymentHeaderTitle.textContent=t.paymentHeaderTitle.getAttribute("data-text-waiting"),t.paymentHeaderCheckout.innerHTML=t.paymentHeaderCheckout.getAttribute("data-text-locked")+" 1 "+h+" : "+r.fiatSign+v(_,2),t.paymentHeaderGiftCard.innerHTML=t.paymentHeaderGiftCard.getAttribute("data-text-current")+" 1 "+h+" : "+r.fiatSign+v(_,2),t.paymentHeaderHelper.removeAttribute("style");var P,g,T,q=document.querySelector(".P-box__inner__title");if(q.innerHTML="".concat(q.getAttribute("data-text-paywith")," <span>").concat(f.title," (").concat(f.code,")</span>"),r.timer){t.paymentHeaderTimer.textContent=m(r.timer);var L=new Date,w=new Date(L.setSeconds(L.getSeconds()+t.defaultTimer)),x=new Date;t.handleDocumentVisibility=function(){if("visible"===document.visibilityState&&document.querySelector(".P-Payment__start").offsetWidth>0){var e=Math.abs(x.getTime()-w.getTime()),n=Math.round(e/1e3);Math.abs(r.timer-n)>1&&x<=w?r.timer=n:x>w&&s.call(t)}},document.addEventListener("visibilitychange",t.handleDocumentVisibility),n.interval=setInterval((function(){x=new Date;var e=r.timer-1;t.paymentHeaderTimer.textContent=m(e),e<1?s.call(t):e<60&&(t.paymentHeader.classList.add("P-Payment__header--red"),t.paymentHeaderTitle.textContent=t.paymentHeaderTitle.getAttribute("data-text-expiring"),t.paymentHeaderHelper.style.display="none"),e>=0?r.timer=e:(clearInterval(n.interval),clearInterval(n.checkStatusInterval))}),1e3)}else t.paymentHeaderTimer.style.display="none";document.querySelector(".P-Payment__value__icon h2").innerHTML=(P=-1!==document.body.className.indexOf("french"),g="Envoyer des ".concat(f.title," (").concat(f.code,") à l’adresse ci-dessous"),T="Send ".concat(f.title," (").concat(f.code,") to address below"),P?g:T);var H=document.querySelector(".P-Payment__value__coins"),A=document.querySelector(".P-Payment__value__code"),E=f.coinsPaid||0,C=(f.coinsValue-E).toFixed(8);if((+C).toString().length<6&&document.querySelector(".P-Payment__value").classList.add("P-Payment__value--flex"),H.textContent=+C,A.textContent=f.code,r.showExactAmount){var M=document.querySelector(".Payment__value__section");M&&M.removeAttribute("style")}if(r.enableFiatTotal&&r.fiatValue){document.querySelector(".P-Payment__value__price").removeAttribute("style");var B=E>0?Math.round(f.rate*C*100)/100:r.fiatValue,I=r.fiatSign+(+B).toFixed(2);document.querySelector(".P-Payment__value__price").innerHTML=I}var D,N=document.querySelector(".P-Payment__qr");N.innerHTML="",f.walletLink&&t.options.showExactAmount?(f.walletLink=f.walletLink.replace(/%s(.+?)%s/,f.address+"$1"+C),D=f.walletLink):D=f.address,new QRCode(N,{text:D,width:180,height:180});var O=document.querySelector(".P-wallet-btn");if(f.metamask&&"undefined"!=typeof web3&&web3.eth.accounts.length){var R="Pay with MetaMask";O.querySelector(".P-btn-block__text").textContent=R,O.addEventListener("click",(function(e){e.preventDefault();var n=this;n.setAttribute("disabled",!0),n.querySelector(".P-btn-block__text").textContent=t.coinsBlock.getAttribute("data-text-loading"),web3.eth.sendTransaction({from:web3.eth.accounts[0],to:f.address,value:web3.toWei(+C)},(function(e,r){n.removeAttribute("disabled"),n.querySelector(".P-btn-block__text").textContent=R,e||d.call(t,0)}))})),!1!==f.metamaskAuto&&O.click()}else f.walletLink?O.setAttribute("href",f.walletLink):O.style.display="none";b(f.address),window.addEventListener("resize",this.resizeListener,!0);var V=document.querySelector(".P-btn-copy-address");V.querySelector(".P-btn-block__helper").innerHTML=f.address.slice(0,3)+' <span class="P-dots"><i></i></span> '+f.address.slice(-3),V.addEventListener("click",(function(){V.classList.remove("P-btn-block--copied"),j.classList.remove("P-btn-block--copied"),y(f.address),V.classList.add("P-btn-block--copied"),V.textContent=V.getAttribute("data-text-copied"),i("address-code"),setTimeout((function(){V.textContent=V.getAttribute("data-text-copy")}),5e3)}));var j=document.querySelector(".P-Payment__value__copy");j.querySelector(".P-btn-block__helper").innerHTML=+C+"&nbsp;"+f.code,j.addEventListener("click",(function(){V.classList.remove("P-btn-block--copied"),j.classList.remove("P-btn-block--copied"),y(C),j.classList.add("P-btn-block--copied"),j.textContent=j.getAttribute("data-text-copied"),i("coins-value"),setTimeout((function(){j.textContent=j.getAttribute("data-text-copy")}),5e3)})),p.call(t);var F=f.statusUrl||r.statusUrl;F&&function e(a){n.checkStatusInterval=setInterval((function(){var o=new XMLHttpRequest;o.onload=function(){if(200===o.status){var a=JSON.parse(o.responseText),i=!1;if(r.onStatusPolling)return r.onStatusPolling(a,(function(){u.call(t)}));if(a.success){var l=!1,s=+(r.minOverpaymentFiat/f.rate).toFixed(8);a.coinsPaid>f.coinsValue+s&&(l=+(a.coinsPaid-f.coinsValue).toFixed(8)),u.call(t,a.redirect_url,l)}else{if(a.coinsPaid){if(a.coinsPaid>E){var m=+(r.maxUnderpaymentFiat/f.rate).toFixed(8),y=+(f.coinsValue-a.coinsPaid).toFixed(8);f.coinsPaid=a.coinsPaid,a.coinsPaid<f.coinsValue-m?c.call(t,y,a.coinsPaid):i=!0}}else i=!0;if(i&&("number"!=typeof a.confirmations&&"string"!=typeof a.confirmations||Number.isNaN(+a.confirmations)||d.call(t,a.confirmations),a.statusUrl)){var p=document.createElement("a");p.href=r.statusUrl,clearInterval(n.checkStatusInterval),e(p.protocol+"//"+p.host+a.statusUrl)}}}},o.open("GET",a,!0),o.setRequestHeader("Content-Type","application/json"),o.send()}),1e3*r.statusInterval)}(F)}function i(e){var t=document.getElementById(e);if(document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.select()}else if(window.getSelection){var r=window.getSelection(),a=document.createRange();a.selectNodeContents(t),r.removeAllRanges(),r.addRange(a)}}function c(e,t){var n=this,r=n.state,a=n.options,i=r.currencies[r.selected],c=document.querySelector(".P-Payment__unpaid"),s=document.querySelector(".P-Payment__start");l.call(n),clearInterval(r.interval),clearInterval(r.checkStatusInterval),s.style.display="none",n.paymentHeader.style.display="none",c.removeAttribute("style");var d=c.querySelector(".P-btn"),u=document.querySelectorAll(".P-Payment__unpaid__due"),m=document.querySelectorAll(".P-Payment__unpaid__paid"),y=document.querySelectorAll(".P-Payment__unpaid__underpaid"),p=document.querySelectorAll(".P-Payment__unpaid__paidFiat");E(u,i.coinsValue+" "+i.code),E(m,t+" "+i.code),E(y,e+"&nbsp;"+i.code),E(p,a.fiatSign+(Math.round(i.rate*t*100)/100).toFixed(2)),a.underpaidUrl||a.underpaidText?(a.underpaidUrl&&(d.href=a.underpaidUrl),a.underpaidText&&(d.innerHTML=a.underpaidText)):d.addEventListener("click",(function e(t){t.preventDefault(),c.style.display="none",n.paymentHeader.removeAttribute("style"),o.call(n,!0),d.removeEventListener("click",e)}))}function l(){this.backButton.style.display="none",this.closeButton.removeAttribute("style")}function s(){var e=this,t=e.options;l.call(e),A.call(e);var n=e.state;clearInterval(n.interval),clearInterval(n.checkStatusInterval),e.handleDocumentVisibility&&document.removeEventListener("visibilitychange",e.handleDocumentVisibility);var r=document.querySelector(".P-Payment__expired"),a=document.querySelector(".P-Payment__start"),i=document.querySelector(".P-Payment__unpaid");a.style.display="none",i.style.display="none",e.paymentHeader.removeAttribute("style"),r.removeAttribute("style"),t.timer=0,e.paymentHeaderTimer.textContent=m(t.timer),e.paymentHeader.classList.add("P-Payment__header--red"),e.paymentHeaderTitle.textContent=e.paymentHeaderTitle.getAttribute("data-text-expired"),e.paymentHeaderHelper.textContent=e.paymentHeaderHelper.getAttribute("data-text-expired"),e.paymentHeaderHelper.removeAttribute("style");var c=document.querySelector(".P-Payment__header__question");c.removeAttribute("style"),c.addEventListener("click",(function(){r.style.display="none",s.removeAttribute("style")}));var s=document.querySelector(".P-Payment__expired-helper");document.querySelector(".P-btn-green--close-info").addEventListener("click",(function(){r.removeAttribute("style"),s.style.display="none"})),r.querySelector(".P-btn").addEventListener("click",(function i(l){l.preventDefault(),c.style.display="none",a.removeAttribute("style"),r.style.display="none",t.timer=e.defaultTimer,n.currencies[n.selected].currencyUrl?T.call(e):o.call(e),this.removeEventListener("click",i)}))}function d(e){var t=this,n=t.options,r=t.state,a=r.isConfirming,o=r.currencies[r.selected],i=o.maxConfirmations;if(l.call(t),!a){var c=function(){p.removeAttribute("style"),p.clientHeight>document.querySelector(".P-box__inner").clientHeight&&(p.style.overflowY="scroll")};A.call(t),t.paymentHeader.classList.remove("P-Payment__header--red"),window.removeEventListener("resize",t.resizeListener,!0),clearInterval(r.interval);var s=0;t.paymentHeaderTimer.removeAttribute("style"),t.paymentHeaderTimer.textContent=m(s),this.state.interval=setInterval((function(){++s,t.paymentHeaderTimer.textContent=m(s)}),1e3);var d=document.querySelector(".P-Payment__start"),u=document.querySelector(".P-Payment__confirming");document.querySelector(".P-Payment__header").style.display="none",d.style.display="none",t.handleDocumentVisibility&&document.removeEventListener("visibilitychange",t.handleDocumentVisibility),u.removeAttribute("style");var y=u.querySelector(".P-Payment__helper"),p=document.querySelector(".P-Payment__confirming-helper"),v=document.querySelector(".P-Payment__confirming-helper button");y.addEventListener("click",(function(){var e=r.currencies[r.selected].blockExplorer;if(u.style.display="none",p.removeAttribute("style"),e){var t=e.replace(/%s/g,o.address);p.querySelector(".block-explorer-li").style.display="block",p.querySelector(".P-block-explorer").setAttribute("href",t)}c(),window.addEventListener("resize",c)})),v.addEventListener("click",(function(){window.removeEventListener("resize",c),u.removeAttribute("style"),p.style.display="none"})),t.paymentHeaderTitle.textContent=t.paymentHeaderTitle.getAttribute("data-text-confirming"),n.redirectPendingTo?u.querySelector(".P-btn").addEventListener("click",(function(e){if(e.preventDefault(),"string"==typeof n.redirectPendingTo)return window.location=n.redirectPendingTo,!1;n.redirectPendingTo()})):n.modal?u.querySelector(".P-btn").addEventListener("click",(function(e){e.preventDefault(),w.call(t)})):u.querySelector(".P-btn").style.display="none"}t.paymentHeaderHelper.textContent=e+" / "+i+" ",t.paymentHeaderHelper.textContent+=1===i?t.paymentHeaderHelper.getAttribute("data-text-confirmation"):t.paymentHeaderHelper.getAttribute("data-text-confirmations"),this.state.isConfirming=!0}function u(e,t){var n=this,r=n.state,a=n.options;l.call(n),A.call(n);var o=r.currencies[r.selected];clearInterval(r.interval),clearInterval(r.checkStatusInterval);var i=function(){window.location.href=e,e.indexOf(window.location.href)>-1&&window.location.reload()},c=document.querySelector(".P-Payment__start"),s=document.querySelector(".P-Payment__confirming"),d=document.querySelector(".P-Payment__confirming-helper"),u=document.querySelector(".P-Payment__confirmed");c.style.display="none",n.handleDocumentVisibility&&document.removeEventListener("visibilitychange",n.handleDocumentVisibility),s.style.display="none",d.style.display="none",u.removeAttribute("style"),n.paymentHeader.style.display="none",document.querySelector(".P-Payment__header__check").style.display="block";var m=u.querySelector("p"),y=u.querySelector(".P-btn");if(m.style.display="none",y.addEventListener("click",(function(e){e.preventDefault(),i.call(n)})),a.redirectTo)y.setAttribute("href",a.redirectTo),a.redirectTimeout&&(m.removeAttribute("style"),m.innerHTML=m.getAttribute("data-text-redirect").replace(":seconds",a.redirectTimeout));else if(a.modal){var p=document.createElement("button");p.innerHTML='<i class="P-btn__icon--close"></i> Close',p.classList.value="P-btn P-btn--sm",y.parentNode.replaceChild(p,y),u.querySelector(".P-btn").addEventListener("click",(function(e){e.preventDefault(),w.call(n)}))}else y.style.display="none";t?(document.querySelector(".P-Payment__confirmed__title").classList.add("P-Payment__confirmed__title--overpaid"),u.querySelector(".P-Content__icon img").setAttribute("src","/static/min/img/warning.svg"),y.innerHTML="Ok",u.querySelector("h2").innerHTML="<div><b>"+u.getAttribute("data-text-overpay")+" "+t+" "+o.code+"</b></div>",m.removeAttribute("style"),m.innerHTML=m.getAttribute("data-text-credit")):(a.redirectTo&&a.redirectTimeout||e)&&(a.redirectTo&&(e=a.redirectTo),setTimeout(i,1e3*a.redirectTimeout))}function m(e){var t=parseInt(e/60,10),n=parseInt(e%60,10);return n=n<10?"0"+n:n,"".concat(t=t<10?"0"+t:t,":").concat(n)}function y(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style.left="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;t.style.top=n+"px",t.setAttribute("readonly",""),t.value=e,document.querySelector(".bcprovider-app").appendChild(t),function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),a=document.createRange();a.selectNodeContents(e),r.removeAllRanges(),r.addRange(a),t=r.toString()}}(t);try{return document.execCommand("copy")}catch(e){return!1}}}function p(){var e=this.state,t=e.currencies[e.selected],n="P-Tabs__Tab-list",r="P-Tabs__Tab-list--second",a="P-Tabs__Tab-list--third",o="P-Tabs__Tab-list--no-wallet",i="P-Tabs__Tab",c="P-Tabs__Tab--wallet",l="P-Tabs__Tab-panel",s="P-Tabs__Tab-panel--wallet",d="P-Tabs__Tab--selected",u="P-Tabs__Tab-panel--selected",m=document.querySelectorAll("."+i),y=document.querySelectorAll("."+l);t.walletLink||(document.querySelector("."+n).classList.remove(r),document.querySelector("."+n).classList.add(o),document.querySelector("."+c).style.display="none",document.querySelector("."+s).style.display="none",m=document.querySelectorAll("."+i+":not(."+c+")"),y=document.querySelectorAll("."+l+":not(."+s+")"));for(var p=0;p<m.length;++p)!function(e){m[p].onclick=function(){var c=[n];t.walletLink||c.push(o),1===e?c.push(r):2===e&&c.push(a),this.parentNode.className=c.join(" ");for(var l=0;l<m.length;++l)m[l].className=i;this.classList.add(d);for(var s=0;s<y.length;++s)y[s].classList.remove(u);y[e].classList.add(u)}}(p)}function v(e,t,n,r){t=isNaN(t=Math.abs(t))?2:t,n=null==n?".":n,r=null==r?",":r;var a=e<0?"-":"",o=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),i=(i=o.length)>3?i%3:0;return a+(i?o.substr(0,i)+r:"")+o.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-o).toFixed(t).slice(2):"")}function b(e){document.querySelector(".P-Payment__address").clientWidth;var t=document.querySelector(".P-Payment__address code");t.innerHTML="<span>A</span>",t.querySelector("span").style.display="inline-block",t.innerHTML="",t.textContent=e}function f(){document.querySelector(".bcprovider-spinner").removeAttribute("style"),document.querySelector(".bcprovider-app").style.display="none",document.querySelector(".bcprovider-app-error").style.display="none"}function _(){var e=this;document.querySelector(".bcprovider-spinner").style.display="none",document.querySelector(".bcprovider-app").style.display="none",document.querySelector(".bcprovider-app-error").removeAttribute("style"),"string"==typeof e.options.currencies?document.querySelector(".bcprovider-app-error .P-btn").addEventListener("click",(function t(r){r.preventDefault(),n.call(e),this.removeEventListener("click",t)})):document.querySelector(".bcprovider-app-error .P-btn").style.display="none",e.options.modal&&H.call(e)}function h(){document.querySelector(".bcprovider-spinner").style.display="none",document.querySelector(".bcprovider-app").removeAttribute("style")}function P(){this.coinsBlock.classList.add("P-disabled")}function S(){var e=this;e.coinsBlock.classList.remove("P-disabled"),document.querySelector(".bcprovider-app").style.display="none",document.querySelector(".bcprovider-app-error").removeAttribute("style"),e.state.currencies.length>1?(document.querySelector(".bcprovider-app-error .P-btn").textContent="Back",document.querySelector(".bcprovider-app-error .P-btn").addEventListener("click",(function t(a){a.preventDefault(),"string"==typeof e.options.currencies?n.call(e):(document.querySelector(".bcprovider-app").removeAttribute("style"),document.querySelector(".bcprovider-app-error").style.display="none",r.call(e)),this.removeEventListener("click",t)}))):document.querySelector(".bcprovider-app-error .P-btn").style.display="none",e.options.modal&&H.call(e)}function g(){this.coinsBlock.classList.remove("P-disabled")}function T(){var e=this,t=e.state,n=new XMLHttpRequest;f.call(e),n.onload=function(){if(200!==n.status)S.call(e);else{h.call(e);var r=JSON.parse(n.responseText);Object.assign(t.currencies[t.selected],r),$(".bcprovider-app").data("min-value",{minimum:r.minimum,token:r.token}),o.call(e)}},n.open("GET",t.currencies[t.selected].currencyUrl,!0),n.setRequestHeader("Content-Type","application/json"),n.send()}function q(){var e=this,t=document.createElement("div");t.className="BCPROVIDERModal";var n=document.createElement("div");n.className="BCPROVIDERModal__Overlay";var r=document.createElement("div");r.className="BCPROVIDERModal__Content",r.appendChild(e.root),t.appendChild(n),t.appendChild(r),document.body.appendChild(t),e.modal=t,L.call(e)}function L(){var e=this;e.state.isModalShown=!0;var t=document.createEvent("HTMLEvents");t.initEvent("show",!0,!0),t.eventName="show",e.modal.dispatchEvent(t),x.call(e)}function w(){var e=this;A.call(e),e.state.isModalShown=!1;var t=document.createEvent("HTMLEvents");t.initEvent("hide",!0,!0),t.eventName="hide",e.modal.dispatchEvent(t),x.call(e),e.destroy()}function x(){var e=this,t="BCPROVIDERModal--open",n="BCPROVIDERModal__Body--open";e.state.isModalShown?(e.modal.classList.add(t),document.body.classList.add(n)):(e.modal.classList.remove(t),document.body.classList.remove(n))}function H(){var e=this;e.root.style.height="auto";var t=document.querySelector(".BCPROVIDERModal__Overlay"),n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",(function t(){w.call(e),e.root.removeAttribute("style"),this.removeEventListener("click",t,!1)}),!1)}function k(){var e=this,t=e.options;t.unloadHandler&&!e.state.unloadBound&&(e.state.unloadBound=!0,window.addEventListener("beforeunload",t.unloadHandler))}function A(){var e=this,t=e.options;t.unloadHandler&&e.state.unloadBound&&(e.state.unloadBound=!1,window.removeEventListener("beforeunload",t.unloadHandler))}function E(e,t){for(var n=0;n<e.length;n++)e[n].innerHTML=t}this.bcprovider=function(){window.bcprovider instanceof bcprovider&&(bcprovider.destroy(),window.bcprovider=void 0),this.state={checkStatusInterval:null,interval:null,selected:0,isConfirming:!1,html:null,isModalShown:!1,unloadBound:!1};var t,n=this;if(arguments[0]&&"object"===_typeof(arguments[0])&&(this.arguments=arguments[0],t=this.arguments),void 0!==t.button){var r=document.querySelector(t.button);if(!r)throw new Error("Can't find "+t.button);var a=r.cloneNode(!0);r.parentNode.replaceChild(a,r),a.addEventListener("click",(function(t){t.preventDefault(),e.call(n)}))}else e.call(n)},bcprovider.prototype.destroy=function(){var e=this,t=e.state;document.querySelector(".bcprovider-app").style.display="none",t.html&&(e.options.modal&&e.modal.parentNode&&(document.body.appendChild(e.root),e.modal.parentNode.removeChild(e.modal)),e.root.innerHTML=t.html),window.removeEventListener("resize",this.resizeListener,!0),clearInterval(t.interval),clearInterval(t.checkStatusInterval)},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var o=Object.keys(Object(a)),i=0,c=o.length;i<c;i++){var l=o[i],s=Object.getOwnPropertyDescriptor(a,l);void 0!==s&&s.enumerable&&(n[l]=a[l])}}return n}})}();