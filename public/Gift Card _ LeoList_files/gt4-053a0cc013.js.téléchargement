function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t){"use strict";if(void 0===t)throw new Error("Geetest requires browser environment");var e=t.document,r=t.Math,o=e.getElementsByTagName("head")[0];function n(t){this._obj=t}n.prototype={_each:function(t){var e=this._obj;for(var r in e)e.hasOwnProperty(r)&&t(r,e[r]);return this},_extend:function(t){var e=this;new n(t)._each((function(t,r){e._obj[t]=r}))}};function c(t){var e=this;new n(t)._each((function(t,r){e[t]=r}))}c.prototype={apiServers:["gcaptcha4.geetest.com","gcaptcha4.geevisit.com","gcaptcha4.gsensebot.com"],staticServers:["static.geetest.com","static.geevisit.com","dn-staticdown.qbox.me"],protocol:"http://",typePath:"/load",fallback_config:{bypass:{staticServers:["static.geetest.com","static.geevisit.com","dn-staticdown.qbox.me"],type:"bypass",bypass:"/v4/bypass.js"}},_get_fallback_config:function(){var t=this;return a(t.type)?t.fallback_config[t.type]:t.fallback_config.bypass},_extend:function(t){var e=this;new n(t)._each((function(t,r){e[t]=r}))}};var a=function(t){return"string"==typeof t},i=function(t){return"function"==typeof t},s=/Mobi/i.test(navigator.userAgent),u={},l={},f=Object.prototype.toString;function p(t,e){if((r=t)!==Object(r)||function(t){return"[object Date]"==f.call(t)}(t)||function(t){return"[object RegExp]"==f.call(t)}(t)||function(t){return"[object Boolean]"==f.call(t)}(t)||function(t){return"function"==typeof t}(t))return e?function(t){return t.replace(/(\S)(_([a-zA-Z]))/g,(function(t,e,r,o){return e+o.toUpperCase()||""}))}(t):t;var r;if(function(t){return"[object Array]"==f.call(t)}(t))for(var o=[],n=0;n<t.length;n++)o.push(p(t[n]));else{o={};for(var c in t)t.hasOwnProperty(c)&&(o[p(c,!0)]=p(t[c]))}return o}var d=function(t,e,r,o){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var c=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(r)+function(t){if(!t)return"";var e="?";return new n(t)._each((function(t,r){(a(r)||function(t){return"number"==typeof t}(r)||function(t){return"boolean"==typeof t}(r))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(r)+"&")})),"?"===e&&(e=""),e.replace(/&$/,"")}(o);return e&&(c=t+e+c),c},g=function(n,c,a,i,s,u,l){!function f(p){if(l){var g="geetest_"+(parseInt(1e4*r.random())+(new Date).valueOf());t[g]=function(t,e){if("function"==typeof t){var r=Array.prototype.slice.call(arguments,2);return Function.prototype.bind?t.bind(e,r):function(){var o=Array.prototype.slice.call(arguments);return t.apply(e,r.concat(o))}}}(l,null,g),s.callback=g}!function(t,r,n){var c=e.createElement("script");c.charset="UTF-8",c.async=!0,/static\.geetest\.com/g.test(t)&&(c.crossOrigin="anonymous"),c.onerror=function(){r(!0),a=!0};var a=!1;c.onload=c.onreadystatechange=function(){a||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(a=!0,setTimeout((function(){r(!1)}),0))},c.src=t,o.appendChild(c),setTimeout((function(){a||(c.onerror=c.onload=null,c.remove&&c.remove(),r(!0))}),n||1e4)}(d(c,a[p],i,s),(function(e){if(e){if(g)try{t[g]=function(){t[g]=null}}catch(t){}p>=a.length-1?u(!0):f(p+1)}else u(!1)}),n.timeout)}(0)},y=function(t,e,r){if("function"!=typeof e.onError)throw new Error({networkError:"Geetest Network Error",gtTypeError:"gt field is not of type string"}[t]);e.onError({desc:r.desc,msg:r.msg,code:r.code})};(t.Geetest||e.getElementById("gt_lib"))&&(l.slide="loaded");t.initGeetest4=function(o,a){var f,d=new c(o);o.https?d.protocol="https://":o.protocol||(d.protocol=t.location.protocol+"//"),"object"===_typeof(f=o.getType)&&null!==f&&d._extend(o.getType),function(e,o,n,c){g(n,n.protocol,e,o,{captcha_id:n.captchaId,challenge:n.challenge||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*r.random()|0;return("x"===t?e:3&e|8).toString(16)})),client_type:s?"h5":"web",risk_type:n.riskType,call_type:n.callType,lang:n.language?n.language:"Netscape"===navigator.appName?navigator.language.toLowerCase():navigator.userLanguage.toLowerCase()},(function(t){t&&"function"==typeof n.offlineCb?n.offlineCb():t&&c(n._get_fallback_config())}),(function(e,r){"success"==r.status?c(r.data):(r.status,c(r)),t[e]=void 0;try{delete t[e]}catch(t){}}))}(d.apiServers,d.typePath,d,(function(r){if("error"===(r=p(r)).status)return y("networkError",d,r);var o=r.type;d.debug&&new n(r)._extend(d.debug);var c=function(){d._extend(r);try{a(new t.Geetest4(d))}catch(t){a({error:t})}};u[o]=u[o]||[];var s=l[o]||"init";if("init"===s)l[o]="loading",u[o].push(c),r.gctPath&&g(d,d.protocol,Object.hasOwnProperty.call(d,"staticServers")?d.staticServers:r.staticServers||d.staticServers,r.gctPath,null,(function(t){t&&(trackDDMetric("geetest.error",{code:"60205",detail:"gct resource load timeout"}),y("networkError",d,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}}))})),g(d,d.protocol,Object.hasOwnProperty.call(d,"staticServers")?d.staticServers:r.staticServers||d.staticServers,r.bypass||r.staticPath+r.js,null,(function(t){if(t)l[o]="fail",trackDDMetric("geetest.error",{code:"60204",detail:"js resource load timeout"}),y("networkError",d,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}});else{l[o]="loaded";for(var e=u[o],r=0,n=e.length;r<n;r+=1){var c=e[r];i(c)&&c()}u[o]=[]}}));else{if("loaded"===s)return function(t){var r=!1,o={js:"script",css:"link"}[t.split(".").pop()];if(void 0!==o){var n=e.getElementsByTagName(o);for(var c in n)(n[c].href&&n[c].href.toString().indexOf(t)>0||n[c].src&&n[c].src.toString().indexOf(t)>0)&&(r=!0)}return r}(r.gctPath)||g(d,d.protocol,Object.hasOwnProperty.call(d,"staticServers")?d.staticServers:r.staticServers||d.staticServers,r.gctPath,null,(function(t){t&&(trackDDMetric("geetest.error",{code:"60205",detail:"gct resource load timeout"}),y("networkError",d,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}}))})),c();"fail"===s?(trackDDMetric("geetest.error",{code:"60204",detail:"js resource load timeout"}),y("networkError",d,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}})):"loading"===s&&u[o].push(c)}}))}}(window);